import java.awt.*;
import java.awt.event.*;
import java.io.*;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.OutputStream;
import java.util.ArrayList;
import java.util.LinkedList;

public class main implements Serializable{
	public static void main(String[] args) {
		final Frame f = new Frame("CardLayoutTest");
		final CardLayout card = new CardLayout(10,10);
		final int SizeNumber = 5;
		//CardLayout Settings end
		
		//Basic Settings start
		TextArea View;
		Button input,modify,delete,output,exit;
		Button confirm,listoutput,inputExit;
		Button deleteExit,deletebutton;
		f.setLayout(card);
		f.addWindowListener(new EventHandler());
		Panel card1 = new Panel();
		Panel card2 = new Panel();
		Panel card3 = new Panel();
		card3.add(new Label("Card 3"));
		Panel card4 = new Panel();
		Panel card5 = new Panel();
		//Basic Settings end
		
		//main menu configure start
		f.add(card1,"main");
		f.add(card2,"input");
		f.add(card3,"Modify");
		f.add(card4,"Delete");
		f.add(card5,"Output");
		input=new Button("입력");
		input.addActionListener(new ActionListener(){
			public void actionPerformed(ActionEvent e) {
				card.show(f,"input");
			}
		});
		
		modify=new Button("수정");
		modify.addActionListener(new ActionListener(){
			public void actionPerformed(ActionEvent e) {
				card.show(f,"Modify");
			}
		});
		delete=new Button("삭제");	
		delete.addActionListener(new ActionListener(){
			public void actionPerformed(ActionEvent e) {
				card.show(f,"Delete");
			}
		});
		output=new Button("출력");
		output.addActionListener(new ActionListener(){
			public void actionPerformed(ActionEvent e) {
				card.show(f,"Output");
			}
		});
		
		card1.add(input);
		card1.add(modify);
		card1.add(delete);
		card1.add(output);
		//main menu configure end
		
		//input menu configure start
		
		Label name=new Label("이름 :");
		Label number=new Label("전화번호 :");
		Label memo=new Label("메모: ");
		confirm=new Button("확인");
		inputExit=new Button("돌아가기");
		
		TextField inputname=new TextField(10);
		TextField inputnumber=new TextField(11);
		TextField inputmemo=new TextField(10);
		
		card2.add(name);
		card2.add(inputname);
		card2.add(number);
		card2.add(inputnumber);
		card2.add(memo);
		card2.add(inputmemo);
		
		
		inputExit.addActionListener(new ActionListener(){
			public void actionPerformed(ActionEvent e1) {
				card.show(f,"main");
			}	
		});
		ArrayList list=new ArrayList();
		
		confirm.addActionListener(new ActionListener(){
			public void actionPerformed(ActionEvent e) {
				String Pname=inputname.getText();
				String Pnumber=inputnumber.getText();
				String Pmemo=inputmemo.getText();
				try{
					int i=0;
					
					String filename = "UserInfo.ser";
					FileOutputStream fos = new FileOutputStream(filename);
					BufferedOutputStream bos = new BufferedOutputStream(fos);
					ObjectOutputStream out = new ObjectOutputStream(bos);
					while(i<1) {
						PeopleInfo Username1 =new PeopleInfo(Pname,Pnumber,Pmemo);
						list.add(Username1);
						out.writeObject(Username1);
						out.writeObject(list);
						out.close();
						i++;
					}
				}catch(IOException e1) {
					e1.printStackTrace();
				}
				finally {
				
				}
			}
		});
		card2.add(confirm);
		card2.add(inputExit);
		//input menu configure end
		
		//Modify menu configure start
		
		
		
		//Modify menu configure end
		
		
		//Delete menu configure start
		Label guide = new Label("삭제할 객체의 번호를 입력하세요.");
		TextField indexnumber =new TextField(3);
		deleteExit=new Button("돌아가기");
		deletebutton=new Button("삭제하기");
		deleteExit.addActionListener(new ActionListener(){
			public void actionPerformed(ActionEvent e1) {
				card.show(f,"main");
			}	
		});
		String stringnumber = indexnumber.getText();
		int listnumber = Integer.parseInt(stringnumber);
		
		card4.add(guide);
		card4.add(indexnumber);
		card4.add(deletebutton);
		card4.add(deleteExit);
		
		
		
		
		
		//Delete menu configure end
		
		//Output menu configure start
		View=new TextArea(10,50);
		card5.add(View);
		listoutput=new Button("출력확인");
		listoutput.addActionListener(new ActionListener(){
			public void actionPerformed(ActionEvent e) {
			try {
				String fileName="UserInfo.ser";
				FileInputStream fis = new FileInputStream(fileName);
				BufferedInputStream bis = new BufferedInputStream(fis);
				
				ObjectInputStream in = new ObjectInputStream(bis);
				
				PeopleInfo Username1=(PeopleInfo) in.readObject();
				ArrayList list1 = (ArrayList)in.readObject();
				
				View.setText(list1.toString());
				//System.out.println(list);
				in.close();
				}
			catch(Exception e2) {
			e2.printStackTrace();
			}
			}
		});
		card5.add(listoutput);
		
		//Output menu configure end
		
		/*
		class Handler extends MouseAdapter{
			public void mouseClicked(MouseEvent e) {
				if(e.getModifiers()==e.BUTTON3_MASK) {
					card.previous(f);
				}else {
					card.next(f);
				}
			}
		}
		card1.addMouseListener(new Handler());
		card2.addMouseListener(new Handler());
		card3.addMouseListener(new Handler());
		*/
		
		f.setSize(600,600);
		f.setLocation(200,200);
		f.setVisible(true);
		
		card.show(f, "main");
	}
	

}
